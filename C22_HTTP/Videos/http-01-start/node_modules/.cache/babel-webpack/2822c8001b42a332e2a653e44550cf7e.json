{"ast":null,"code":"import _classCallCheck from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Scheduler } from '../Scheduler';\nexport var AsyncScheduler = /*#__PURE__*/function (_Scheduler) {\n  _inherits(AsyncScheduler, _Scheduler);\n\n  var _super = _createSuper(AsyncScheduler);\n\n  function AsyncScheduler(SchedulerAction) {\n    var _this;\n\n    var now = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Scheduler.now;\n\n    _classCallCheck(this, AsyncScheduler);\n\n    _this = _super.call(this, SchedulerAction, now);\n    _this.actions = [];\n    _this._active = false;\n    _this._scheduled = undefined;\n    return _this;\n  }\n\n  _createClass(AsyncScheduler, [{\n    key: \"flush\",\n    value: function flush(action) {\n      var actions = this.actions;\n\n      if (this._active) {\n        actions.push(action);\n        return;\n      }\n\n      var error;\n      this._active = true;\n\n      do {\n        if (error = action.execute(action.state, action.delay)) {\n          break;\n        }\n      } while (action = actions.shift());\n\n      this._active = false;\n\n      if (error) {\n        while (action = actions.shift()) {\n          action.unsubscribe();\n        }\n\n        throw error;\n      }\n    }\n  }]);\n\n  return AsyncScheduler;\n}(Scheduler);","map":{"version":3,"sources":["../../../../src/internal/scheduler/AsyncScheduler.ts"],"names":[],"mappings":";;;;AAAA,SAAS,SAAT,QAA0B,cAA1B;AAIA,WAAa,cAAb;AAAA;;AAAA;;AAkBE,0BAAY,eAAZ,EAA6E;AAAA;;AAAA,QAAjC,GAAiC,uEAAb,SAAS,CAAC,GAAG;;AAAA;;AAC3E,8BAAM,eAAN,EAAuB,GAAvB;AAlBK,UAAA,OAAA,GAAmC,EAAnC;AAOA,UAAA,OAAA,GAAmB,KAAnB;AAQA,UAAA,UAAA,GAAkB,SAAlB;AAEsE;AAE5E;;AApBH;AAAA;AAAA,WAsBS,eAAM,MAAN,EAA8B;AACnC,UAAQ,OAAR,GAAoB,IAApB,CAAQ,OAAR;;AAEA,UAAI,KAAK,OAAT,EAAkB;AAChB,QAAA,OAAO,CAAC,IAAR,CAAa,MAAb;AACA;AACD;;AAED,UAAI,KAAJ;AACA,WAAK,OAAL,GAAe,IAAf;;AAEA,SAAG;AACD,YAAK,KAAK,GAAG,MAAM,CAAC,OAAP,CAAe,MAAM,CAAC,KAAtB,EAA6B,MAAM,CAAC,KAApC,CAAb,EAA0D;AACxD;AACD;AACF,OAJD,QAIU,MAAM,GAAG,OAAO,CAAC,KAAR,EAJnB;;AAMA,WAAK,OAAL,GAAe,KAAf;;AAEA,UAAI,KAAJ,EAAW;AACT,eAAQ,MAAM,GAAG,OAAO,CAAC,KAAR,EAAjB,EAAoC;AAClC,UAAA,MAAM,CAAC,WAAP;AACD;;AACD,cAAM,KAAN;AACD;AACF;AA/CH;;AAAA;AAAA,EAAoC,SAApC","sourceRoot":"","sourcesContent":["import { Scheduler } from '../Scheduler';\nexport class AsyncScheduler extends Scheduler {\n    constructor(SchedulerAction, now = Scheduler.now) {\n        super(SchedulerAction, now);\n        this.actions = [];\n        this._active = false;\n        this._scheduled = undefined;\n    }\n    flush(action) {\n        const { actions } = this;\n        if (this._active) {\n            actions.push(action);\n            return;\n        }\n        let error;\n        this._active = true;\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions.shift()));\n        this._active = false;\n        if (error) {\n            while ((action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=AsyncScheduler.js.map"]},"metadata":{},"sourceType":"module"}