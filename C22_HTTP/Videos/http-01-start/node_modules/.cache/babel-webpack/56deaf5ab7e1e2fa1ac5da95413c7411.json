{"ast":null,"code":"import { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function switchMap(project, resultSelector) {\n  return operate(function (source, subscriber) {\n    var innerSubscriber = null;\n    var index = 0;\n    var isComplete = false;\n\n    var checkComplete = function checkComplete() {\n      return isComplete && !innerSubscriber && subscriber.complete();\n    };\n\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n      var innerIndex = 0;\n      var outerIndex = index++;\n      innerFrom(project(value, outerIndex)).subscribe(innerSubscriber = createOperatorSubscriber(subscriber, function (innerValue) {\n        return subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue);\n      }, function () {\n        innerSubscriber = null;\n        checkComplete();\n      }));\n    }, function () {\n      isComplete = true;\n      checkComplete();\n    }));\n  });\n}","map":{"version":3,"sources":["../../../../src/internal/operators/switchMap.ts"],"names":[],"mappings":"AAEA,SAAS,SAAT,QAA0B,yBAA1B;AACA,SAAS,OAAT,QAAwB,cAAxB;AACA,SAAS,wBAAT,QAAyC,sBAAzC;AAiFA,OAAM,SAAU,SAAV,CACJ,OADI,EAEJ,cAFI,EAEyG;AAE7G,SAAO,OAAO,CAAC,UAAC,MAAD,EAAS,UAAT,EAAuB;AACpC,QAAI,eAAe,GAA0C,IAA7D;AACA,QAAI,KAAK,GAAG,CAAZ;AAEA,QAAI,UAAU,GAAG,KAAjB;;AAIA,QAAM,aAAa,GAAG,SAAhB,aAAgB;AAAA,aAAM,UAAU,IAAI,CAAC,eAAf,IAAkC,UAAU,CAAC,QAAX,EAAxC;AAAA,KAAtB;;AAEA,IAAA,MAAM,CAAC,SAAP,CACE,wBAAwB,CACtB,UADsB,EAEtB,UAAC,KAAD,EAAU;AAER,MAAA,eAAe,KAAA,IAAf,IAAA,eAAe,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAA,eAAe,CAAE,WAAjB,EAAA;AACA,UAAI,UAAU,GAAG,CAAjB;AACA,UAAM,UAAU,GAAG,KAAK,EAAxB;AAEA,MAAA,SAAS,CAAC,OAAO,CAAC,KAAD,EAAQ,UAAR,CAAR,CAAT,CAAsC,SAAtC,CACG,eAAe,GAAG,wBAAwB,CACzC,UADyC,EAKzC,UAAC,UAAD;AAAA,eAAgB,UAAU,CAAC,IAAX,CAAgB,cAAc,GAAG,cAAc,CAAC,KAAD,EAAQ,UAAR,EAAoB,UAApB,EAAgC,UAAU,EAA1C,CAAjB,GAAiE,UAA/F,CAAhB;AAAA,OALyC,EAMzC,YAAK;AAIH,QAAA,eAAe,GAAG,IAAlB;AACA,QAAA,aAAa;AACd,OAZwC,CAD7C;AAgBD,KAxBqB,EAyBtB,YAAK;AACH,MAAA,UAAU,GAAG,IAAb;AACA,MAAA,aAAa;AACd,KA5BqB,CAD1B;AAgCD,GA1Ca,CAAd;AA2CD","sourceRoot":"","sourcesContent":["import { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function switchMap(project, resultSelector) {\n    return operate((source, subscriber) => {\n        let innerSubscriber = null;\n        let index = 0;\n        let isComplete = false;\n        const checkComplete = () => isComplete && !innerSubscriber && subscriber.complete();\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n            let innerIndex = 0;\n            const outerIndex = index++;\n            innerFrom(project(value, outerIndex)).subscribe((innerSubscriber = createOperatorSubscriber(subscriber, (innerValue) => subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue), () => {\n                innerSubscriber = null;\n                checkComplete();\n            })));\n        }, () => {\n            isComplete = true;\n            checkComplete();\n        }));\n    });\n}\n//# sourceMappingURL=switchMap.js.map"]},"metadata":{},"sourceType":"module"}