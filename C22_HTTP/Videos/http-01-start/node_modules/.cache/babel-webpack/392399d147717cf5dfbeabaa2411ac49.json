{"ast":null,"code":"import _classCallCheck from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/maryanderson/Documents/GitHub/Local-Codelabs-Repository/C22_HTTP/Videos/http-01-start/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nexport var Subscriber = /*#__PURE__*/function (_Subscription) {\n  _inherits(Subscriber, _Subscription);\n\n  var _super = _createSuper(Subscriber);\n\n  function Subscriber(destination) {\n    var _this;\n\n    _classCallCheck(this, Subscriber);\n\n    _this = _super.call(this);\n    _this.isStopped = false;\n\n    if (destination) {\n      _this.destination = destination;\n\n      if (isSubscription(destination)) {\n        destination.add(_assertThisInitialized(_this));\n      }\n    } else {\n      _this.destination = EMPTY_OBSERVER;\n    }\n\n    return _this;\n  }\n\n  _createClass(Subscriber, [{\n    key: \"next\",\n    value: function next(value) {\n      if (this.isStopped) {\n        handleStoppedNotification(nextNotification(value), this);\n      } else {\n        this._next(value);\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(err) {\n      if (this.isStopped) {\n        handleStoppedNotification(errorNotification(err), this);\n      } else {\n        this.isStopped = true;\n\n        this._error(err);\n      }\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      if (this.isStopped) {\n        handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n      } else {\n        this.isStopped = true;\n\n        this._complete();\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (!this.closed) {\n        this.isStopped = true;\n\n        _get(_getPrototypeOf(Subscriber.prototype), \"unsubscribe\", this).call(this);\n\n        this.destination = null;\n      }\n    }\n  }, {\n    key: \"_next\",\n    value: function _next(value) {\n      this.destination.next(value);\n    }\n  }, {\n    key: \"_error\",\n    value: function _error(err) {\n      try {\n        this.destination.error(err);\n      } finally {\n        this.unsubscribe();\n      }\n    }\n  }, {\n    key: \"_complete\",\n    value: function _complete() {\n      try {\n        this.destination.complete();\n      } finally {\n        this.unsubscribe();\n      }\n    }\n  }], [{\n    key: \"create\",\n    value: function create(next, error, complete) {\n      return new SafeSubscriber(next, error, complete);\n    }\n  }]);\n\n  return Subscriber;\n}(Subscription);\nvar _bind = Function.prototype.bind;\n\nfunction bind(fn, thisArg) {\n  return _bind.call(fn, thisArg);\n}\n\nvar ConsumerObserver = /*#__PURE__*/function () {\n  function ConsumerObserver(partialObserver) {\n    _classCallCheck(this, ConsumerObserver);\n\n    this.partialObserver = partialObserver;\n  }\n\n  _createClass(ConsumerObserver, [{\n    key: \"next\",\n    value: function next(value) {\n      var partialObserver = this.partialObserver;\n\n      if (partialObserver.next) {\n        try {\n          partialObserver.next(value);\n        } catch (error) {\n          handleUnhandledError(error);\n        }\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(err) {\n      var partialObserver = this.partialObserver;\n\n      if (partialObserver.error) {\n        try {\n          partialObserver.error(err);\n        } catch (error) {\n          handleUnhandledError(error);\n        }\n      } else {\n        handleUnhandledError(err);\n      }\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      var partialObserver = this.partialObserver;\n\n      if (partialObserver.complete) {\n        try {\n          partialObserver.complete();\n        } catch (error) {\n          handleUnhandledError(error);\n        }\n      }\n    }\n  }]);\n\n  return ConsumerObserver;\n}();\n\nexport var SafeSubscriber = /*#__PURE__*/function (_Subscriber) {\n  _inherits(SafeSubscriber, _Subscriber);\n\n  var _super2 = _createSuper(SafeSubscriber);\n\n  function SafeSubscriber(observerOrNext, error, complete) {\n    var _this2;\n\n    _classCallCheck(this, SafeSubscriber);\n\n    _this2 = _super2.call(this);\n    var partialObserver;\n\n    if (isFunction(observerOrNext) || !observerOrNext) {\n      partialObserver = {\n        next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined,\n        error: error !== null && error !== void 0 ? error : undefined,\n        complete: complete !== null && complete !== void 0 ? complete : undefined\n      };\n    } else {\n      var context;\n\n      if (_assertThisInitialized(_this2) && config.useDeprecatedNextContext) {\n        context = Object.create(observerOrNext);\n\n        context.unsubscribe = function () {\n          return _this2.unsubscribe();\n        };\n\n        partialObserver = {\n          next: observerOrNext.next && bind(observerOrNext.next, context),\n          error: observerOrNext.error && bind(observerOrNext.error, context),\n          complete: observerOrNext.complete && bind(observerOrNext.complete, context)\n        };\n      } else {\n        partialObserver = observerOrNext;\n      }\n    }\n\n    _this2.destination = new ConsumerObserver(partialObserver);\n    return _this2;\n  }\n\n  return _createClass(SafeSubscriber);\n}(Subscriber);\n\nfunction handleUnhandledError(error) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    captureError(error);\n  } else {\n    reportUnhandledError(error);\n  }\n}\n\nfunction defaultErrorHandler(err) {\n  throw err;\n}\n\nfunction handleStoppedNotification(notification, subscriber) {\n  var onStoppedNotification = config.onStoppedNotification;\n  onStoppedNotification && timeoutProvider.setTimeout(function () {\n    return onStoppedNotification(notification, subscriber);\n  });\n}\n\nexport var EMPTY_OBSERVER = {\n  closed: true,\n  next: noop,\n  error: defaultErrorHandler,\n  complete: noop\n};","map":{"version":3,"sources":["../../../src/internal/Subscriber.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nexport class Subscriber extends Subscription {\n    constructor(destination) {\n        super();\n        this.isStopped = false;\n        if (destination) {\n            this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(this);\n            }\n        }\n        else {\n            this.destination = EMPTY_OBSERVER;\n        }\n    }\n    static create(next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    }\n    next(value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    }\n    error(err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    }\n    complete() {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    }\n    unsubscribe() {\n        if (!this.closed) {\n            this.isStopped = true;\n            super.unsubscribe();\n            this.destination = null;\n        }\n    }\n    _next(value) {\n        this.destination.next(value);\n    }\n    _error(err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    }\n    _complete() {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    }\n}\nconst _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nclass ConsumerObserver {\n    constructor(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    next(value) {\n        const { partialObserver } = this;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    }\n    error(err) {\n        const { partialObserver } = this;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    }\n    complete() {\n        const { partialObserver } = this;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    }\n}\nexport class SafeSubscriber extends Subscriber {\n    constructor(observerOrNext, error, complete) {\n        super();\n        let partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined,\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            let context;\n            if (this && config.useDeprecatedNextContext) {\n                context = Object.create(observerOrNext);\n                context.unsubscribe = () => this.unsubscribe();\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context),\n                    error: observerOrNext.error && bind(observerOrNext.error, context),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        this.destination = new ConsumerObserver(partialObserver);\n    }\n}\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    const { onStoppedNotification } = config;\n    onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\n}\nexport const EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map"]},"metadata":{},"sourceType":"module"}